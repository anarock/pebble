language: node_js
node_js:
  - "10"
env:
  - CI=true
cache: yarn
git:
  depth: 5
script:
  - yarn build
  - yarn test:cover
  - if [ "${CIRCLE_BRANCH}" != "master" ];
    then
    if [[ $TRAVIS_EVENT_TYPE != 'pull_request' ||  $TRAVIS_PULL_REQUEST_SLUG != $TRAVIS_REPO_SLUG ]];
    then
    npm run chromatic
    fi
    else
    yarn chromatic --auto-accept-changes
    fi
